<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Animation</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background:"#afafb3"; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<canvas id="myCanvas" width="480" height="320"></canvas>

<script>

class DrawObject{
    constructor(x,y,canvas){
        this.x = x;
        this.y = y;
        this.vx = 0;
        this.vy = 0;
        this.canvas = canvas;
    }
    draw(){
        this.canvas.fillRect(this.x, this.y, 30, 30);
    }

    move(x,y,frame){
        this.frame = frame;
        this.vx = (-this.x + x)/frame;
        this.vy = (-this.y + y)/frame;
    }
    stop(){
        this.vx = 0;
        this.vy = 0;
        this.frame =0;
    }
    update(){
        this.x += this.vx;
        this.y += this.vy;
        
        if(this.frame>=0){
            this.frame--;
        }else{
            this.stop();
        }
    }
}
class Card extends DrawObject{
    static colors = ["#009944","#de82a7","#006eb0","#9fc24d","#6b395f","#00ac97","#ff9500","#f62e36","#b5b5ac","#009bbf","#00bb85","#00ac9b","#9c5e31","#f39700","#e60012","#9caeb7","#00a7db","#009944","#d7c447","#9b7cb6","#00ada9","#bb641d","#e85298","#0079c2","#6cbb5a","#b6007a","#e5171f","#522886","#0078ba","#019a66","#e44d93","#814721","#a9cc51","#ee7b1a","#00a0de"];
  
    constructor(x,y,canvas,num){
        super(x,y,canvas);
        this.num = num;
    }

    draw(){
        let width = 60;
        let height = 100;
        ctx.fillStyle = Card.colors[this.num-1];
        ctx.strokeStyle = 'black';
        ctx.lineWidth = 6
        this.canvas.strokeRect(this.x, this.y, width, height);
        ctx.strokeStyle = 'white';
        ctx.lineWidth = 5;
        this.canvas.fillRect(this.x, this.y, width, height);
        this.canvas.strokeRect(this.x, this.y, width, height);


        ctx.fillStyle = 'white';
        ctx.strokeStyle = 'white';
        ctx.font = 'bold 30px serif';
        ctx.textBaseline = "middle";
        ctx.textAlign="center";
        ctx.lineWidth = 0;
        this.canvas.fillText(this.num+"",this.x+width/2, this.y+height/2);
    }
}

var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");


dolist = [];

//テスト用にDrawObjectいっぱいいれとく
for(i =1;i<=35;i++){
    dolist.push(new Card(0,0,ctx,i));
}
//ここまで
setInterval(tick,25);

function tick(){
    dolist.forEach(dob =>dob.update());
    ctx.clearRect(0,0,1000,1000);
    dolist.forEach(dob =>dob.draw());

    //テスト用にframeが0になるたびにランダムムーブ
    dolist.forEach(dob =>{
        if(dob.frame==0)dob.move(random(450),random(290),10+random(20));
    });
    //ここまで
}

function random(max) {
  return Math.floor(Math.random() * max);
}
</script>

</body>
</html>